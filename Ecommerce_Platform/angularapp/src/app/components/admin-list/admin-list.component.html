<div class="admin-container">
  <h2 class="admin-title">Manage Products</h2>

  <!-- Filters -->
  <div class="admin-filters">
    <!-- Search by Name -->
    <input class="admin-search"
           [(ngModel)]="searchTerm"
           (input)="applyFilters()"
           placeholder="ðŸ” Search by name" />
  
    <!-- Sort by Price -->
    <select class="admin-select"
            [(ngModel)]="sortOrder"
            (change)="applyFilters()">
      <option value="">Sort by Price</option>
      <option value="asc">Low â†’ High</option>
      <option value="desc">High â†’ Low</option>
    </select>
  
    <!-- Top N by Sales -->
    <input class="admin-search" 
           type="number"
           [ngModel]="topN"
           (ngModelChange)="topN = +$event; applyFilters()"
           placeholder="ðŸ† Top N by sales" />
  
    <!-- Buttons -->
    <!-- <button class="admin-button admin-button-filter" (click)="applyFilters()">Apply</button> -->
    <button class="admin-button admin-button-delete" (click)="resetFilters()">Reset</button>
    <!-- âœ… Add Product button -->
    <button class="admin-button admin-button-add" (click)="addProduct()">+ Add Product</button>
  </div>

  <!-- Product Table -->
  <table class="admin-table">
    <thead>
      <tr>
        <th>ID</th><th>Image</th><th>Name</th><th>Description</th>
        <th>Price</th><th>Quantity</th><th>Sales Count</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of filteredProducts">
        <td>{{ product.id }}</td>
        <td><img *ngIf="product.image" [src]="product.image" alt="Product" width="60" /></td>
        <td>{{ product.name }}</td>
        <td>{{ product.description }}</td>
        <td>{{ product.price }}</td>
        <td>{{ product.stock }}</td>
        <td class="sales-col">{{ product.salesCount }}</td>
        <td>
          <button class="admin-button admin-button-add" (click)="editProduct(product)">Edit</button>
          <button class="admin-button admin-button-delete" (click)="deleteProduct(product.id!)">Delete</button>
          <button class="admin-button"
                  [ngClass]="product.disabled ? 'admin-button-delete' : 'admin-button-add'"
                  (click)="toggleProduct(product)">
            {{ product.disabled ? 'Enable' : 'Disable' }}
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div class="admin-pagination">
    <button class="admin-button" (click)="prevPage()">Prev</button>
    <button *ngFor="let page of [].constructor(totalPages); let i = index"
            class="admin-button"
            [ngClass]="currentPage === i+1 ? 'active-page' : ''"
            (click)="goToPage(i+1)">
      {{ i+1 }}
    </button>
    <button class="admin-button" (click)="nextPage()">Next</button>
  </div>
</div>
